<!DOCTYPE html>
<html>
<head>
  <title>수계별 주요 feature 예측결과</title>
  <meta charset="UTF-8">
  <script>
    function showSelectedValues() {
      var watershed = document.getElementById("watershed").value;
      var period = document.getElementById("period").value;
      var ft = document.getElementById("ft").value;
      var op = document.getElementById("op").value;
      var t_set = document.getElementById("t_set").value;

      if (op === "d" || watershed === "d" || period === "d" || ft === "d" || t_set === "d") {
        document.getElementById("output").textContent = "입력 값을 모두 선택하세요.";
        return;
      }
      if (period === "14" && t_set === "1") {
        document.getElementById("output").textContent = "테스트셋 2는 14일 예측이 안됩니다. 다른 기간을 선택하세요.";
        return;
      }

      var form = document.createElement("form");
      form.setAttribute("method", "post");
     if (t_set === "0") {
      form.setAttribute("action", "http://58.226.30.76:5000/predict");
      }
     else {
       form.setAttribute("action", "http://58.226.30.76:5000/predict2");
      }

      var input1 = document.createElement("input");
      input1.setAttribute("type", "hidden");
      input1.setAttribute("name", "id");
      input1.setAttribute("value", watershed);
      form.appendChild(input1);

      var input2 = document.createElement("input");
      input2.setAttribute("type", "hidden");
      input2.setAttribute("name", "period");
      input2.setAttribute("value", period);
      form.appendChild(input2);
        
      var input3 = document.createElement("input");
      input3.setAttribute("type", "hidden");
      input3.setAttribute("name", "ft");
      input3.setAttribute("value", ft);
      form.appendChild(input3);

      var input4 = document.createElement("input");
      input4.setAttribute("type", "hidden");
      input4.setAttribute("name", "op");
      input4.setAttribute("value", op);
      form.appendChild(input4);
        
      var input5 = document.createElement("input");
      input5.setAttribute("type", "hidden");
      input5.setAttribute("name", "t_set");
      input5.setAttribute("value", t_set);
      form.appendChild(input5);
        
      document.body.appendChild(form);
      form.submit();
    }
    function handleSelectChange() {
      var watershed = document.getElementById("watershed").value;
      var period = document.getElementById("period").value;
      var op = document.getElementById("op").value;

      if (op === "d" || watershed === "d" || period === "d") {
        document.getElementById("output").textContent = "수계와 예측기간, 모델종류를 선택하세요!";
        return;
      }

      var form = document.createElement("form");
      form.setAttribute("method", "post");
      form.setAttribute("action", "http://58.226.30.76:5000");

      var input1 = document.createElement("input");
      input1.setAttribute("type", "hidden");
      input1.setAttribute("name", "id");
      input1.setAttribute("value", watershed);
      form.appendChild(input1);

      var input2 = document.createElement("input");
      input2.setAttribute("type", "hidden");
      input2.setAttribute("name", "period");
      input2.setAttribute("value", period);
      form.appendChild(input2);
        
      var input3 = document.createElement("input");
      input3.setAttribute("type", "hidden");
      input3.setAttribute("name", "op");
      input3.setAttribute("value", op);
      form.appendChild(input3);
        
      document.body.appendChild(form);
      form.submit();
    }
  </script>
</head>
<body style="text-align: center;">
    <h2 style="text-align: center;"> 4대 수계 측정요소 딥러닝 기반 예측(Team 2)</h2>
    <div style="text-align: center; margin-bottom: 20px;">
      <p style="margin: 5px 0;"> ⊙ 한강: 경안천10/경안천, 금강: 대청댐4/장계, 낙동강: 안동댐/안동댐 하류, 영산강: 주암댐/주암호</p>
      <p style="margin: 5px 0;"> ⊙ 테스트셋 1: 2022. 1. 1. ~ 2023. 2. 28. / 테스트셋 2: 2023. 3. 2. ~ 3. 31.</p>
    </div><br>
  <iframe src="http://58.226.30.76:5000/map" width="800" height="300"></iframe> 
  <h3>검색조건 선택</h3>
    
  <label for="op">모델구분 : </label>
  <select id="op">
    <option value="d" selected>--선택--</option>
    <option value="0" {% for i in op %} {% if i == "0" %} selected {% endif %} {% endfor %}>기준성능 이상</option>
    <option value="1" {% for i in op %} {% if i == "1" %} selected {% endif %} {% endfor %}>기준성능 미만</option>
  </select>

  <label for="watershed">수계 : </label>
  <select id="watershed">
    <option value="d" selected>--선택--</option>
    <option value="0" {% for i in id %} {% if i == "0" %} selected {% endif %} {% endfor %}>한강</option>
    <option value="1" {% for i in id %} {% if i == "1" %} selected {% endif %} {% endfor %}>금강</option>
    <option value="2" {% for i in id %} {% if i == "2" %} selected {% endif %} {% endfor %}>낙동강</option>
    <option value="3" {% for i in id %} {% if i == "3" %} selected {% endif %} {% endfor %}>영산강</option>
  </select>

  <label for="period">기간 : </label>
  <select id="period" onchange="handleSelectChange()">
    <option value="d" selected>--선택--</option>
    <option value="1" {% if day == '1' %} selected {% endif %}>1 일</option>
    <option value="5" {% if day == '5' %} selected {% endif %}>5 일</option>
    <option value="7" {% if day == '7' %} selected {% endif %}>7 일</option>
    <option value="14" {% if day == '14' %} selected {% endif %}> 14 일</option>
  </select>
  <label for="ft">측정요소 : </label>
  <select id="ft">
    <option value="d" selected>--선택--</option>
{% for c in col %}  
    <option value="{{c}}">{{c}}</option>
{% endfor %}
  </select> 
  <label for="t_set">테스트셋 : </label>
  <select id="t_set">
    <option value="d" selected>--선택--</option>
    <option value="0">테스트셋1</option>
    <option value="1">테스트셋2</option>
  </select> <a style = "text-decoration: none;color: #337ab7;font-weight: bold;" href="#" onclick="showSelectedValues()">[ Test ]</a>
  <br><br>
  <div id="output" style="text-align: center; margin-bottom: 20px; color: red;"></div>
  <div id="copyright">Copyright © 2023 Eunyoung Park. All rights reserved.</div>
</body>
</html>

